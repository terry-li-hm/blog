---
export interface Props {
  pubDatetime: string | Date;
  modDatetime?: string | Date | null;
  readingTime?: number;
}

const { pubDatetime, modDatetime, readingTime } = Astro.props;

const displayDate = modDatetime && modDatetime > pubDatetime ? modDatetime : pubDatetime;
const date = new Date(displayDate);

// Format as YYYY.MM.DD like Chiri
const year = date.getFullYear();
const month = String(date.getMonth() + 1).padStart(2, '0');
const day = String(date.getDate()).padStart(2, '0');
const formattedDate = `${year}.${month}.${day}`;
---

<p class="date">
  <time datetime={date.toISOString()}>{formattedDate}</time>
  {readingTime && <span class="reading-time"> Â· {readingTime} min read</span>}
</p>

<style>
  .date {
    margin: 0;
    color: var(--text-secondary);
    opacity: 0.75;
    letter-spacing: var(--spacing-s);
    flex-shrink: 0;
    white-space: nowrap;
  }
</style>